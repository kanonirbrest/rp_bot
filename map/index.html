<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>Карта выставки — Небо Река</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --c1: #4f8ef7;   /* Луч — синий */
      --c2: #e05cff;   /* Письмо — фиолетовый */
      --c3: #35d4a0;   /* Лаванда — бирюзовый */
      --c4: #ff7c3e;   /* Хождение — оранжевый */
      --bg: #0d0d0d;
      --surface: #161616;
      --border: #262626;
      --text: #f0f0f0;
      --muted: #777;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: -apple-system, 'Helvetica Neue', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 48px;
    }

    header {
      width: 100%;
      padding: 20px 20px 14px;
      text-align: center;
      border-bottom: 1px solid var(--border);
    }

    header h1 {
      font-size: 1.25rem;
      letter-spacing: 0.22em;
      font-weight: 600;
      background: linear-gradient(135deg, #f0c060, #e8d5b0, #fff8e8);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    header p {
      font-size: 0.68rem;
      color: var(--muted);
      margin-top: 4px;
      letter-spacing: 0.18em;
    }

    /* ─── Зал ─── */
    .map-wrap {
      width: 100%;
      max-width: 640px;
      padding: 20px 14px 0;
    }

    .hall {
      position: relative;
      width: 100%;
      aspect-ratio: 4/3;
      background: #111;
      border: 2px solid #2a2a2a;
      border-radius: 10px;
      overflow: hidden;
    }

    .hall::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(rgba(255,255,255,.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,.02) 1px, transparent 1px);
      background-size: 36px 36px;
      pointer-events: none;
    }

    .entrance-gap {
      position: absolute;
      bottom: -2px;
      left: 50%;
      transform: translateX(-50%);
      width: 64px;
      height: 4px;
      background: #0d0d0d;
    }

    .entrance-label {
      position: absolute;
      bottom: 7px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.5rem;
      color: #444;
      letter-spacing: 0.18em;
      white-space: nowrap;
    }

    /* ─── Зоны ─── */
    .zone {
      position: absolute;
      cursor: pointer;
      border-radius: 8px;
      border: 2px solid #2a2a2a;
      background: #1a1a1a;
      transition: border-color .18s, background .18s, box-shadow .18s, transform .12s;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
      -webkit-tap-highlight-color: transparent;
    }

    .zone:active { transform: scale(.96); }

    .zone[data-id="1"]:hover, .zone[data-id="1"].active {
      border-color: var(--c1);
      background: #0e1a2e;
      box-shadow: 0 0 24px rgba(79,142,247,.25), inset 0 0 12px rgba(79,142,247,.08);
    }
    .zone[data-id="2"]:hover, .zone[data-id="2"].active {
      border-color: var(--c2);
      background: #1c0d26;
      box-shadow: 0 0 24px rgba(224,92,255,.25), inset 0 0 12px rgba(224,92,255,.08);
    }
    .zone[data-id="3"]:hover, .zone[data-id="3"].active {
      border-color: var(--c3);
      background: #0b1e18;
      box-shadow: 0 0 24px rgba(53,212,160,.25), inset 0 0 12px rgba(53,212,160,.08);
    }
    .zone[data-id="4"]:hover, .zone[data-id="4"].active {
      border-color: var(--c4);
      background: #201208;
      box-shadow: 0 0 24px rgba(255,124,62,.25), inset 0 0 12px rgba(255,124,62,.08);
    }

    .zone-icon {
      width: 56px;
      height: 56px;
      transition: opacity .18s;
      opacity: .35;
    }

    .zone:hover .zone-icon, .zone.active .zone-icon { opacity: 1; }

    /* SVG анимации */
    @keyframes beam-rotate {
      from { transform: rotate(-30deg); }
      to   { transform: rotate(30deg); }
    }
    @keyframes flash {
      0%,100% { opacity: .9; }
      50%      { opacity: .3; }
    }
    @keyframes sway {
      0%,100% { transform: rotate(-6deg); }
      50%      { transform: rotate(6deg); }
    }
    @keyframes ripple {
      0%   { r: 4; opacity: .9; }
      100% { r: 22; opacity: 0; }
    }
    @keyframes ripple2 {
      0%   { r: 4; opacity: .7; }
      100% { r: 18; opacity: 0; }
    }
    @keyframes pulse-ring {
      0%   { r: 8;  opacity: .6; }
      100% { r: 26; opacity: 0; }
    }

    .zone-num {
      font-size: 0.58rem;
      color: #444;
      letter-spacing: 0.1em;
      transition: color .18s;
    }

    .zone:hover .zone-num, .zone.active .zone-num { color: #aaa; }

    .zone-label {
      position: absolute;
      bottom: -20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.5rem;
      white-space: nowrap;
      color: #555;
      letter-spacing: 0.06em;
      transition: color .18s;
    }

    .zone[data-id="1"]:hover .zone-label, .zone[data-id="1"].active .zone-label { color: var(--c1); }
    .zone[data-id="2"]:hover .zone-label, .zone[data-id="2"].active .zone-label { color: var(--c2); }
    .zone[data-id="3"]:hover .zone-label, .zone[data-id="3"].active .zone-label { color: var(--c3); }
    .zone[data-id="4"]:hover .zone-label, .zone[data-id="4"].active .zone-label { color: var(--c4); }

    /* ─── Инфопанель ─── */
    .info-panel {
      width: 100%;
      max-width: 640px;
      margin: 28px 14px 0;
      padding: 18px 20px;
      background: var(--surface);
      border-radius: 10px;
      border: 1px solid var(--border);
      min-height: 100px;
      transition: border-color .2s;
    }

    .info-panel.c1 { border-color: rgba(79,142,247,.4); }
    .info-panel.c2 { border-color: rgba(224,92,255,.4); }
    .info-panel.c3 { border-color: rgba(53,212,160,.4); }
    .info-panel.c4 { border-color: rgba(255,124,62,.4); }

    .info-empty {
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #333;
      font-size: 0.8rem;
      letter-spacing: 0.06em;
    }

    .info-tag {
      display: inline-block;
      font-size: 0.6rem;
      letter-spacing: 0.14em;
      padding: 2px 10px;
      border-radius: 20px;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .c1 .info-tag { background: rgba(79,142,247,.15); color: var(--c1); }
    .c2 .info-tag { background: rgba(224,92,255,.15); color: var(--c2); }
    .c3 .info-tag { background: rgba(53,212,160,.15); color: var(--c3); }
    .c4 .info-tag { background: rgba(255,124,62,.15);  color: var(--c4); }

    .info-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
      color: #f0f0f0;
      letter-spacing: 0.02em;
    }

    .info-desc {
      font-size: 0.8rem;
      color: #999;
      line-height: 1.7;
    }

    /* ─── Список ─── */
    .list {
      width: 100%;
      max-width: 640px;
      padding: 20px 14px 0;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    @media (max-width: 380px) { .list { grid-template-columns: 1fr; } }

    .list-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      border: 1px solid var(--border);
      border-radius: 8px;
      cursor: pointer;
      transition: border-color .18s, background .18s;
      -webkit-tap-highlight-color: transparent;
    }

    .list-dot {
      width: 8px;
      height: 8px;
      border-radius: 2px;
      flex-shrink: 0;
    }

    .list-item[data-id="1"] .list-dot { background: var(--c1); }
    .list-item[data-id="2"] .list-dot { background: var(--c2); }
    .list-item[data-id="3"] .list-dot { background: var(--c3); }
    .list-item[data-id="4"] .list-dot { background: var(--c4); }

    .list-item[data-id="1"]:hover, .list-item[data-id="1"].active { border-color: rgba(79,142,247,.5); background: #0e1a2e; }
    .list-item[data-id="2"]:hover, .list-item[data-id="2"].active { border-color: rgba(224,92,255,.5); background: #1c0d26; }
    .list-item[data-id="3"]:hover, .list-item[data-id="3"].active { border-color: rgba(53,212,160,.5); background: #0b1e18; }
    .list-item[data-id="4"]:hover, .list-item[data-id="4"].active { border-color: rgba(255,124,62,.5); background: #201208; }

    .list-text {
      font-size: 0.75rem;
      color: #bbb;
      line-height: 1.3;
    }
  </style>
</head>
<body>

<header>
  <h1>НЕБО РЕКА</h1>
  <p>11 МАРТА · ПЛАН ВЫСТАВКИ</p>
</header>

<div class="map-wrap">
  <div class="hall" id="hall">
    <div class="entrance-gap"></div>
    <div class="entrance-label">↑ ВХОД</div>
  </div>
</div>

<div class="info-panel" id="info">
  <div class="info-empty">Нажми на зону чтобы узнать подробнее</div>
</div>

<div class="list" id="list"></div>

<script>
  // Инициализация Telegram Mini App
  if (window.Telegram && window.Telegram.WebApp) {
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();
  }

  const svgs = {
    // Луч — качающийся прожектор с лучом
    1: `<svg viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g style="transform-origin:28px 14px; animation:beam-rotate 2.4s ease-in-out infinite alternate;">
        <rect x="24" y="8" width="8" height="10" rx="2" fill="#4f8ef7"/>
        <polygon points="18,18 38,18 44,48 12,48" fill="#4f8ef7" opacity="0.18"/>
        <polygon points="22,18 34,18 36,36 20,36" fill="#4f8ef7" opacity="0.35"/>
      </g>
      <circle cx="28" cy="50" r="3" fill="#4f8ef7" opacity="0.5">
        <animate attributeName="opacity" values="0.5;1;0.5" dur="2.4s" repeatCount="indefinite"/>
      </circle>
    </svg>`,

    // Молния — вспышка с мерцанием
    2: `<svg viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g style="animation:flash 1.8s ease-in-out infinite;">
        <polygon points="30,4 18,28 26,28 22,52 38,24 30,24" fill="#e05cff"/>
        <polygon points="30,4 18,28 26,28 22,52 38,24 30,24" fill="#e05cff" opacity="0.3" transform="scale(1.15) translate(-4,-4)"/>
      </g>
      <circle cx="28" cy="28" r="20" stroke="#e05cff" stroke-width="1" opacity="0">
        <animate attributeName="r" values="10;26" dur="1.8s" repeatCount="indefinite"/>
        <animate attributeName="opacity" values="0.5;0" dur="1.8s" repeatCount="indefinite"/>
      </circle>
    </svg>`,

    // Лаванда — покачивающийся стебель с листьями
    3: `<svg viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g style="transform-origin:28px 48px; animation:sway 3s ease-in-out infinite;">
        <line x1="28" y1="48" x2="28" y2="16" stroke="#35d4a0" stroke-width="2" stroke-linecap="round"/>
        <ellipse cx="28" cy="12" rx="5" ry="8" fill="#35d4a0" opacity="0.9"/>
        <ellipse cx="20" cy="26" rx="4" ry="7" fill="#35d4a0" opacity="0.7" transform="rotate(-30 20 26)"/>
        <ellipse cx="36" cy="26" rx="4" ry="7" fill="#35d4a0" opacity="0.7" transform="rotate(30 36 26)"/>
        <ellipse cx="22" cy="36" rx="3" ry="5" fill="#35d4a0" opacity="0.5" transform="rotate(-20 22 36)"/>
        <ellipse cx="34" cy="36" rx="3" ry="5" fill="#35d4a0" opacity="0.5" transform="rotate(20 34 36)"/>
      </g>
    </svg>`,

    // Вода — расходящиеся круги
    4: `<svg viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="28" cy="30" r="4" fill="#ff7c3e" opacity="0.9"/>
      <circle cx="28" cy="30" r="4" stroke="#ff7c3e" stroke-width="1.5" fill="none">
        <animate attributeName="r" values="4;22" dur="2s" repeatCount="indefinite" begin="0s"/>
        <animate attributeName="opacity" values="0.9;0" dur="2s" repeatCount="indefinite" begin="0s"/>
      </circle>
      <circle cx="28" cy="30" r="4" stroke="#ff7c3e" stroke-width="1" fill="none">
        <animate attributeName="r" values="4;18" dur="2s" repeatCount="indefinite" begin="0.6s"/>
        <animate attributeName="opacity" values="0.7;0" dur="2s" repeatCount="indefinite" begin="0.6s"/>
      </circle>
      <circle cx="28" cy="30" r="4" stroke="#ff7c3e" stroke-width="1" fill="none">
        <animate attributeName="r" values="4;14" dur="2s" repeatCount="indefinite" begin="1.2s"/>
        <animate attributeName="opacity" values="0.5;0" dur="2s" repeatCount="indefinite" begin="1.2s"/>
      </circle>
      <ellipse cx="28" cy="44" rx="16" ry="4" fill="#ff7c3e" opacity="0.08"/>
    </svg>`,
  };

  const exhibits = [
    {
      id: 1,
      title: "Луч с управлением",
      color: "c1",
      tag: "ИНСТАЛЛЯЦИЯ",
      desc: "Направленный луч прожектора следует за зрителем через датчики движения. Свет не отпускает — работа задаёт вопрос: кто управляет, а кто подчиняется?",
      pos: { left: "8%", top: "8%", width: "36%", height: "36%" },
    },
    {
      id: 2,
      title: "Письмо вспышка",
      color: "c2",
      tag: "ФОТОГРАФИЯ",
      desc: "Крупноформатные снимки удара молнии над рекой, напечатанные на полупрозрачной бумаге с подсветкой сзади. Кадр, существующий долю секунды — и остающийся навсегда.",
      pos: { right: "8%", top: "8%", width: "36%", height: "36%" },
    },
    {
      id: 3,
      title: "Сколько лаванды ты весишь",
      color: "c3",
      tag: "ОБЪЕКТ",
      desc: "Весы: на одной чаше — сухая лаванда, на другой — чистый лист. Зритель добавляет записки с собственными словами. Запах, вес и текст в постоянном неустойчивом равновесии.",
      pos: { left: "8%", bottom: "10%", width: "36%", height: "34%" },
    },
    {
      id: 4,
      title: "Хождение по воде",
      color: "c4",
      tag: "ВИДЕО",
      desc: "Проекция поверхности реки на пол зала. Когда зритель заходит в зону — рябь расходится от ног. Тело становится камнем, брошенным в воду. Или — человеком, который верит.",
      pos: { right: "8%", bottom: "10%", width: "36%", height: "34%" },
    },
  ];

  const hall = document.getElementById("hall");
  const info = document.getElementById("info");
  const list = document.getElementById("list");
  let active = null;

  function select(id) {
    const ex = exhibits.find(e => e.id === id);
    document.querySelectorAll(".zone, .list-item").forEach(el => el.classList.remove("active"));

    if (active === id) {
      active = null;
      info.className = "info-panel";
      info.innerHTML = '<div class="info-empty">Нажми на зону чтобы узнать подробнее</div>';
      return;
    }

    active = id;
    document.querySelectorAll(`[data-id="${id}"]`).forEach(el => el.classList.add("active"));

    info.className = `info-panel ${ex.color}`;
    info.innerHTML = `
      <div class="info-tag">${ex.tag} · ${ex.id} / ${exhibits.length}</div>
      <div class="info-title">${ex.title}</div>
      <div class="info-desc">${ex.desc}</div>
    `;

    if (window.Telegram?.WebApp?.HapticFeedback) {
      Telegram.WebApp.HapticFeedback.impactOccurred("light");
    }

    info.scrollIntoView({ behavior: "smooth", block: "nearest" });
  }

  exhibits.forEach(ex => {
    const zone = document.createElement("div");
    zone.className = "zone";
    zone.dataset.id = ex.id;
    Object.assign(zone.style, ex.pos);
    zone.innerHTML = `
      <div class="zone-icon">${svgs[ex.id]}</div>
      <div class="zone-num">${ex.id}</div>
      <div class="zone-label">${ex.title}</div>
    `;
    zone.addEventListener("click", () => select(ex.id));
    hall.appendChild(zone);

    const item = document.createElement("div");
    item.className = "list-item";
    item.dataset.id = ex.id;
    item.innerHTML = `
      <div class="list-dot"></div>
      <div class="list-text">${ex.title}</div>
    `;
    item.addEventListener("click", () => select(ex.id));
    list.appendChild(item);
  });
</script>
</body>
</html>
